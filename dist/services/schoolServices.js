const pool=require("../config/database");module.exports={create:(e,o)=>{pool.query("INSERT INTO instituicao(cd_escolar, cnpj, instituicao, tipo_instituicao, cep_inst, telefone, email, senha) \n            VALUES (?,?,?,?,?,?,?,?)",[e.cd_escolar,e.cnpj,e.instituicao,e.tipo_instituicao,e.cep_inst,e.telefone,e.email,e.senha],((e,i,t)=>e?o(e):o(null,i)))},getSchools:e=>{pool.query("SELECT cd_escolar, cnpj, instituicao, tipo_instituicao, cep_inst, telefone, email, senha FROM instituicao",[],((o,i,t)=>o?e(o):e(null,i)))},getSchoolById:(e,o)=>{pool.query("SELECT cd_escolar, cnpj, instituicao, tipo_instituicao, cep_inst, telefone, email, senha FROM instituicao WHERE cd_escolar = ?",[e],((e,i,t)=>e?o(e):o(null,i[0])))},getAllEventsSchoolDo:(e,o)=>{pool.query("SELECT e.cd_evento, e.nome_evento, e.data_evento, e.horario, e.quantidade_ingressos, e.descricao, e.cep_evento,\n            CASE WHEN ie.principal = 1 THEN ie.imagem ELSE NULL END AS imagem\n        FROM evento e\n        LEFT JOIN imagem_evento ie ON e.cd_evento = ie.cd_evento\n        WHERE e.cd_instituicao = ?",[e],((e,i,t)=>e?o(e):o(null,i)))},updateSchool:(e,o)=>{console.log("Data for updata:",e),pool.query("UPDATE instituicao SET cnpj=?, instituicao=?, tipo_instituicao=?, cep_inst=?, telefone=?, email=?, senha=? WHERE cd_escolar=?",[e.cnpj,e.instituicao,e.tipo_instituicao,e.cep_inst,e.telefone,e.email,e.senha,e.cd_escolar],((e,i,t)=>e?o(e):o(null,i)))},deleteSchool:(e,o)=>{console.log("Data for delete:",e),pool.query("DELETE FROM instituicao WHERE cd_escolar=?",[e.cdEscolar],((e,i,t)=>e?o(e):o(null,i[0])))},getSchoolByCdEscolar:(e,o)=>{pool.query("SELECT * FROM instituicao WHERE cd_escolar = ?",[e],((e,i,t)=>e?(console.log("DB Error:",e),o(e)):(console.log("DB Results:",i),o(null,i[0]))))}};