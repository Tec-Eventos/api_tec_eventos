const pool=require("../config/database"),uploadImageToDatabase=async(o,e,a,n)=>{console.log("Chamada para uploadImageToDatabase");try{const l={cd_evento:o,imagem:e,principal:a,logo_evento:n};console.log("Dados a serem inseridos:",l);const r=await pool.query("INSERT INTO imagem_evento SET ?",l);return console.log("Resultado da inserção:",r),r}catch(o){throw console.error("Erro ao inserir imagem no banco de dados:",o),o}};module.exports={getImagesForEvent:(o,e)=>{pool.query(" SELECT \n          cd_evento,\n          MAX(CASE WHEN principal = 1 THEN imagem ELSE NULL END) AS imagem_principal,\n          MAX(CASE WHEN logo_evento = 1 THEN imagem ELSE NULL END) AS logo_evento,\n          GROUP_CONCAT(CASE WHEN principal = 0 AND logo_evento = 0 THEN imagem ELSE NULL END) AS outras_imagens\n      FROM imagem_evento\n      WHERE cd_evento = ?\n      GROUP BY cd_evento",[o],((o,a,n)=>o?(console.log("DB Error:",o),e(o)):(console.log("DB Results:",a),e(null,a[0]))))},uploadImageToDatabase:uploadImageToDatabase};