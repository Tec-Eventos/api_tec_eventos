const pool=require("../config/database");module.exports={create:(e,n)=>{insertSQL="INSERT INTO qrcode_evento(cd_evento, valor_qr) VALUES(?, ?)",pool.query(insertSQL,[e.cd_evento,e.valor_qr],((e,o,t)=>e?n(e):n(null,o)))},getQRCodeValidator:(e,n,o)=>{selectSQL="SELECT presenca_evento.cd_evento, evento.cd_evento, evento.nome_evento, aluno.nome, aluno.rm_aluno, qrcode_evento.valor_qr\n        FROM (((presenca_evento\n        INNER JOIN evento ON presenca_evento.cd_evento = evento.cd_evento)\n        INNER JOIN aluno ON presenca_evento.rm_aluno = aluno.rm_aluno)\n        INNER JOIN qrcode_evento ON presenca_evento.cd_evento = qrcode_evento.cd_evento) \n        WHERE presenca_evento.cd_evento = ? AND presenca_evento.rm_aluno = ?;",pool.query(selectSQL,[e,n],((e,n,t)=>e?o(e):o(null,n[0])))},selectQrCodeAluno:(e,n,o)=>{selectSQL="SELECT \n        presenca_evento.cd_evento, \n        aluno.nome, \n        aluno.rm_aluno, \n        qrcode_evento.valor_qr,\n        imagem_evento.imagem\n    FROM \n        ((((presenca_evento\n    INNER JOIN evento ON presenca_evento.cd_evento = evento.cd_evento)\n    INNER JOIN aluno ON presenca_evento.rm_aluno = aluno.rm_aluno)\n    INNER JOIN qrcode_evento ON presenca_evento.cd_evento = qrcode_evento.cd_evento)\n    LEFT JOIN imagem_evento ON evento.cd_evento = imagem_evento.cd_evento AND imagem_evento.logo_evento = 1)\n    WHERE presenca_evento.cd_evento = ? AND presenca_evento.rm_aluno = ?",pool.query(selectSQL,[e,n],((e,n,t)=>e?o(e):o(null,n[0])))}};